<!--
  Generated template for the EnterTimesheet page.

  See http://ionicframework.com/docs/v2/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
  <ion-navbar>
    <button ion-button icon-only menuToggle>
      <ion-icon name="menu"></ion-icon>
    </button>
    <ion-title>Enter Timesheet</ion-title>
  </ion-navbar>

</ion-header>


<ion-content>

  <ion-row>
    <ion-col width-10>
      <button ion-button clear class="left-align" (click)="lastWeekClick()"><ion-icon name="arrow-dropleft" class="left-align"></ion-icon></button>
    </ion-col>
    <ion-col width-80>
      <ion-label class="center-align">{{showWeekStart | date:'d/M'}} - {{showWeekEnd | date:'d/M'}}</ion-label>
    </ion-col>
    <ion-col width-10>
      <button ion-button clear class="right-align" (click)="nextWeekClick()"><ion-icon name="arrow-dropright" class="right-align"></ion-icon></button>
    </ion-col>
  </ion-row>

  <ion-card *ngFor="let timesheet of timesheetList; let i = index" (click)="cardClick(i)">

    <ion-row>
      <ion-col width-90></ion-col>
      <ion-col width-10>
        <button ion-button clear (click)="closeClicked(i)"><ion-icon name="close"></ion-icon></button>
      </ion-col>
    </ion-row>

    <ion-item>
      <ion-label>Project</ion-label>
      <ion-select [(ngModel)]="timesheet.Project" (ionChange)="projectChanged(timesheet.Project, i)">
        <ion-option *ngFor="let proj of projectList" [value]="proj">{{proj.label}}</ion-option>
      </ion-select>
    </ion-item>

    <ion-item>
      <ion-label>Task</ion-label>
      <ion-select [(ngModel)]="timesheet.Task" (ionChange)="phaseChanged(timesheet.Task, i)">
        <ion-option *ngFor="let phse of tasksList[i]" [value]="phse">{{phse.label}}</ion-option>
      </ion-select>
    </ion-item>

  </ion-card>

  <button full ion-button (click)="addProjectClicked()">Add Project</button>

  <ion-item>
    <ion-row>
      <ion-col width-50>
        <button full ion-button (click)="saveTimesheetClicked()">Save Timesheet</button>
      </ion-col>
      <ion-col width-50>
        <button full ion-button (click)="submitTimesheetClicked()">Submit Timesheet</button>
      </ion-col>
    </ion-row>
  </ion-item>

</ion-content>